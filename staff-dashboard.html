<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Staff Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="staff-page">

<header class="header">
  <button class="menu-btn" id="menuBtn">☰</button>
  <span>Staff Dashboard</span>
</header>

<div class="layout">

  <!-- SIDEBAR -->
  <nav class="sidebar hidden" id="sidebar">
    <div data-sec="home">Home</div>
    <div data-sec="approval">Student Approval</div>
    <div data-sec="students">Student List</div>
    <div data-sec="attendance">Attendance Records</div>
    <div data-sec="profile">Profile</div>
    <div id="logout">Logout</div>
  </nav>

  <!-- CONTENT -->
  <main class="content">

    <!-- HOME -->
    <section id="home" class="section">
      <h2 id="welcome" class="center"></h2>
    </section>

    <!-- APPROVAL -->
    <section id="approval" class="section hidden">

      <div class="perm-card">
        <h3>Approval Permission</h3>
        <p id="permStatus">Admin permission required</p>
        <button id="requestPerm">Ask Permission</button>
      </div>

      <h3 style="margin-top:20px;">Pending Students</h3>

      <div class="controls">
        <input id="searchPending" placeholder="Search name / ID">
      </div>

      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>ID</th>
            <th>Year</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="pendingTable"></tbody>
      </table>
    </section>

    <!-- STUDENTS -->
    <section id="students" class="section hidden">

      <div class="controls">
        <select id="yearFilter">
          <option value="">All Years</option>
          <option>1</option><option>2</option>
          <option>3</option><option>4</option>
        </select>
        <input id="searchStudent" placeholder="Search name / ID">
      </div>

      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>ID</th>
            <th>Year</th>
          </tr>
        </thead>
        <tbody id="studentTable"></tbody>
      </table>
    </section>

    <!-- ATTENDANCE -->
    <section id="attendance" class="section hidden">

      <div class="controls">
        <input id="searchAtt" placeholder="Search name / ID">
        <select id="sortAtt">
          <option value="name">Sort by Name</option>
          <option value="date">Sort by Date</option>
        </select>
        <button id="downloadExcel">Download Excel</button>
      </div>

      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>ID</th>
            <th>GPS</th>
            <th>Facial</th>
            <th>Manual</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="attTable"></tbody>
      </table>
    </section>

    <!-- PROFILE -->
    <section id="profile" class="section hidden">
      <div class="profile-card">
        <img id="pPhoto" class="profile-img">
        <h3 id="pName"></h3>
        <p>Email: <span id="pEmail"></span></p>
        <p>Phone: <span id="pPhone"></span></p>
        <p>Department: <span id="pDept"></span></p>
        <p>Role: <span id="pRole"></span></p>
      </div>
    </section>

  </main>
</div>

<!-- STUDENT POPUP -->
<div id="studentModal" class="modal hidden">
  <div class="modal-card">
    <button class="close-btn" id="closeModal">✖</button>

    <h3 id="mName"></h3>
    <p>ID: <span id="mId"></span></p>
    <p>Email: <span id="mEmail"></span></p>
    <p>Phone: <span id="mPhone"></span></p>
    <p>Department: <span id="mDept"></span></p>
    <p>Year: <span id="mYear"></span></p>
    <p>Attendance %: <span id="mPercent"></span></p>

    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Session</th>
          <th>Method</th>
          <th>GPS</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="studentAttTable"></tbody>
    </table>
  </div>
</div>

<!-- LOGOUT CONFIRM -->
<div id="logoutConfirm" class="modal hidden">
  <div class="modal-card center">
    <h3>Confirm Logout</h3>
    <button id="confirmLogout">Logout</button>
    <button id="cancelLogout">Cancel</button>
  </div>
</div>

<div id="toast-container"></div>

<script type="module" src="staff-dashboard.js"></script>
</body>
</html>
