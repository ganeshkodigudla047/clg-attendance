<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard | Attendance System</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- HEADER -->
<header class="top-header">
  <div class="logo">ATTENDANCE SYSTEM</div>
  <div class="header-right">
    <span class="menu-icon" id="menuToggle">â˜°</span>
    <div class="menu-dropdown" id="menu"></div>
  </div>
</header>

<div class="container dashboard">

  <!-- ================= PROFILE ================= -->
  <section id="profileView" class="view">
    <h3>My Profile</h3>
    <p><b>Name:</b> <span id="pName"></span></p>
    <p><b>Email:</b> <span id="pEmail"></span></p>
    <p><b>Role:</b> <span id="pRole"></span></p>
    <p><b>Phone:</b> <span id="pPhone"></span></p>
    <p><b>Incharge:</b> <span id="pIncharge"></span></p>
    <p><b>HOD:</b> <span id="pHod"></span></p>
  </section>

  <!-- ================= STUDENT ================= -->
  <section id="studentAttendanceView" class="view">
    <h3>My Attendance</h3>
    <p>Attendance %: <b><span id="stuPercent"></span></b></p>

    <button id="markAttendanceBtn">Mark Attendance</button>
    <button id="requestManualBtn">Request Manual Attendance</button>

    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Time</th>
          <th>Session</th>
          <th>Status</th>
          <th>GPS</th>
          <th>Manual</th>
        </tr>
      </thead>
      <tbody id="studentAttendanceTable"></tbody>
    </table>
  </section>

  <!-- ================= INCHARGE ================= -->
  <section id="inchargeStudentsView" class="view">
    <h3>My Students</h3>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Roll</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="inchargeStudentTable"></tbody>
    </table>
  </section>

  <section id="inchargeAttendanceView" class="view">
    <h3>Attendance Records</h3>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Roll</th>
          <th>Date</th>
          <th>Session</th>
          <th>GPS</th>
          <th>Manual</th>
        </tr>
      </thead>
      <tbody id="inchargeAttendanceTable"></tbody>
    </table>
  </section>

  <!-- ================= HOD ================= -->
  <section id="hodAttendanceView" class="view">
    <h3>Attendance Records</h3>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Roll</th>
          <th>Date</th>
          <th>Session</th>
          <th>GPS</th>
        </tr>
      </thead>
      <tbody id="hodAttendanceTable"></tbody>
    </table>
  </section>

  <!-- ================= ADMIN ================= -->
  <section id="adminAttendanceView" class="view">
    <h3>All Attendance Records</h3>

    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Roll</th>
          <th>Date</th>
          <th>Time</th>
          <th>Session</th>
          <th>GPS</th>
          <th>Accuracy</th>
          <th>Distance (m)</th>
          <th>Manual</th>
          <th>Marked By</th>
        </tr>
      </thead>
      <tbody id="adminAttendanceTable"></tbody>
    </table>

    <!-- MAP -->
    <div id="mapContainer" style="display:none; margin-top:20px;">
      <h3>Location Preview</h3>
      <div id="map" style="width:100%; height:400px;"></div>
      <p id="mapInfo"></p>
    </div>
  </section>

  <section id="adminManualView" class="view">
    <h3>Manual Attendance Requests</h3>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Roll</th>
          <th>Date</th>
          <th>Session</th>
          <th>Requested By</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="adminManualTable"></tbody>
    </table>
  </section>

  <section id="adminSettingsView" class="view">
    <h3>Settings</h3>

    <label>FN Start <input type="time" id="fnStart"></label><br>
    <label>FN End <input type="time" id="fnEnd"></label><br>
    <label>AN Start <input type="time" id="anStart"></label><br>
    <label>AN End <input type="time" id="anEnd"></label><br>

    <label>
      <input type="checkbox" id="lockAttendance">
      Lock Attendance
    </label><br><br>

    <button id="saveSettingsBtn">Save Settings</button>
  </section>

</div>

<script
  src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"
  async
  defer></script>

<script type="module" src="dashboard.js"></script>

<div id="loading"><div>Loading...</div></div>
<div id="networkStatus"></div>

<script>
  const net = document.getElementById("networkStatus");

  function updateNetwork() {
    if (navigator.onLine) {
      net.innerText = "Online";
      net.className = "online";
    } else {
      net.innerText = "Offline";
      net.className = "offline";
    }
    net.style.display = "block";
  }

  window.addEventListener("online", updateNetwork);
  window.addEventListener("offline", updateNetwork);
  updateNetwork();

  function showLoading() {
    document.getElementById("loading").style.display = "flex";
  }
  function hideLoading() {
    document.getElementById("loading").style.display = "none";
  }
</script>


</body>
</html>
